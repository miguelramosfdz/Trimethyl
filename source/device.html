<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='Device'>/**
</span> * @class  Device
 * @author  Flavio De Stefano &lt;flavio.destefano@caffeinalab.com&gt;
 *
 * Query current device for informations
 */

<span id='Device-property-config'>/**
</span> * @type {Object}
 */
var config = _.extend({
}, Alloy.CFG.T.device);
exports.config = config;


<span id='Device-method-onTilt'>/**
</span> * Subscribe for accellerometer updates
 *
 * @param  {Function} callback The callback
 */
function onTilt(callback) {
	if (Alloy.Globals.SIMULATOR){
		Ti.API.error(&#39;Device: accelerometer doesn\&#39;t work on virtual devices&#39;);
		return;
	}

	Ti.Accelerometer.addEventListener(&#39;update&#39;, callback);

	// remove listeners on android to preserve battery life
	if (OS_ANDROID) {
		Ti.Android.currentActivity.addEventListener(&#39;pause&#39;, function() {
			Ti.Accelerometer.removeEventListener(&#39;update&#39;, callback);
		});
		Ti.Android.currentActivity.addEventListener(&#39;resume&#39;, function() {
			Ti.Accelerometer.addEventListener(&#39;update&#39;, callback);
		});
	}
}
exports.onTilt = onTilt;


<span id='Device-method-offTilt'>/**
</span> * Unsubscribe for accellerometer updates
 *
 * @param  {Function} callback The previous callback installed
 */
function offTilt(callback) {
	Ti.Accelerometer.removeEventListener(&#39;update&#39;, callback);
}
exports.offTilt = offTilt;


<span id='Device-method-getScreenDensity'>/**
</span> * Get the device screen density
 *
 * @return {Number} The density
 */
function getScreenDensity() {
	if (OS_ANDROID) return Ti.Platform.displayCaps.logicalDensityFactor;
	return Titanium.Platform.displayCaps.dpi/160;
}
exports.getScreenDensity = getScreenDensity;


<span id='Device-method-getScreenWidth'>/**
</span> * Get the device screen width
 *
 * @return {Number} The width
 */
function getScreenWidth(){
	if (OS_IOS) return Ti.Platform.displayCaps.platformWidth;
	return Ti.Platform.displayCaps.platformWidth/Ti.Platform.displayCaps.logicalDensityFactor;
}
exports.getScreenWidth = getScreenWidth;


<span id='Device-method-getScreenHeight'>/**
</span> * Get the device screen width
 *
 * @return {Number} The height
 */
function getScreenHeight(){
	if (OS_IOS) return Ti.Platform.displayCaps.platformHeight;
	return Ti.Platform.displayCaps.platformHeight/Ti.Platform.displayCaps.logicalDensityFactor;
}
exports.getScreenHeight = getScreenHeight;
</pre>
</body>
</html>
